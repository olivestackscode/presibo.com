<!DOCTYPE html>

<html lang="en">

<head>

  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="refresh" content="0; url="/join.html">
  <title>Register</title>

  <style>

    /* Style for form inputs */

    .form-input {

      width: 100%;

      padding: 12px;

      margin: 10px 0;

      border-radius: 10px;

      border: 2px solid #8ab6d6;

      box-sizing: border-box;

      font-size: 16px;

      background-color: #f1faff;

    }



    /* Style for form button */

    .form-button {

      background-color: #1976D2;

      color: white;

      border: none;

      padding: 12px 20px;

      text-align: center;

      font-size: 18px;

      margin-top: 10px;

      cursor: pointer;

      border-radius: 10px;

      transition: background-color 0.3s ease;

      width: 100%;

    }



    /* Hover effect for button */

    .form-button:hover {

      background-color: #2e6e9c;

    }



    /* Style for the payment popup */

    #paymentPopup {

      display: none;

      padding: 20px;

      background-color: #eef4fc;

      border-radius: 15px;

      border: 2px solid #8ab6d6;

      width: 400px;

      margin: 100px auto;

      text-align: center;

      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);

    }



    /* Style for the rotating bubble popup */

    #processingPopup {

      display: none;

      padding: 10px;

      background-color: #eef4fc;

      border-radius: 15px;

      border: 2px solid #8ab6d6;

      width: 250px;

      margin: 100px auto;

      text-align: center;

      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);

    }



    /* Style for the rotating bubble */

    .rotating-bubble {

      border: 5px solid #f3f3f3;

      border-radius: 50%;

      border-top: 5px solid #3c8dbc;

      width: 40px;

      height: 40px;

      animation: spin 2s linear infinite;

      margin: 20px auto;

    }



    /* Animation for rotating bubble */

    @keyframes spin {

      0% { transform: rotate(0deg); }

      100% { transform: rotate(360deg); }

    }



    /* General styling */

    body {

      font-family: Arial, sans-serif;

      background-color: #fafafa;

    }



    h2, h3 {

      color: #3c8dbc;

    }



  </style>

</head>

<body>

<h2>Presibo</h2>

<h3>Registration Form</h3>







<!-- First Section: Registration Form -->

<form id="registrationForm">

	  

  <label for="firstname" class="form-label">First Name</label>
  <input id="firstname" type="text" name="firstname" class="form-input" required><br>

  <label for="midname" class="form-label">Middle Name</label>
  <input id="midname" type="text" name="midname" class="form-input" required><br>

  <label for="lastname" class="form-label">Last Name</label>
  <input id="lastname" type="text" name="lastname" class="form-input" required><br>

  <label for="birth" class="form-label">Date of Birth</label>
  <input id="birth" type="date" name="age" class="form-input" required><br>

  <label for="bloodGroup" class="form-label">Blood Group</label>
  <input id="bloodGroup" type="text" name="bloodGroup" class="form-input" required><br>

  <label for="sex" class="form-label">Sex</label>
  <input id="sex" type="text" name="sex" class="form-input" required><br>

  <label for="email" class="form-label">Email</label>
  <input id="email" type="email" name="email" class="form-input" required><br>

  <label for="WAtel" class="form-label">WhatsApp Number</label>
  <input id="WAtel" type="tel" name="whatsappNumber" class="form-input" required><br>

  <label for="tel" class="form-label">Mobile Phone</label>
  <input id="tel" type="tel" name="mobilePhone" class="form-input" required><br>

  <label for="address" class="form-label">Address</label>
  <input id="address" type="text" name="address" class="form-input" required><br>

  <label for="city" class="form-label">City</label>
  <input id="city" type="text" name="city" class="form-input" required><br>

  <label for="country" class="form-label">Country</label>
  <input id="country" type="text" name="country" class="form-input" required><br>

  <label for="password" class="form-label">Password</label>
  <input id="password" type="password" name="password" class="form-input" required><br>  

<button type="submit" class="form-button">Register</button>

</form>



<!-- Third Section: Rotating Bubble for Processing -->

<div id="processingPopup">

  <h3>Processing your registration...</h3>
  <h3>Check your email </h3>
    <h3>for account activation...</h3>
  <button class="form-button" onclick = (window.location.href="https://app.presibo.com/login.html")>Login</button>

  <div class="rotating-bubble"></div>

</div>





<script>

  document.getElementById("registrationForm").addEventListener("submit", function (event) {

    event.preventDefault(); // Prevent default form submission behavior



    // Gather form data

     const firstname = document.querySelector("input[name='firstname']").value;

    const age = document.querySelector("input[name='age']").value;

      const bloodGroup = document.querySelector("input[name='bloodGroup']").value;

      const sex = document.querySelector("input[name='sex']").value;

      const email = document.querySelector("input[name='email']").value;

      const whatsappNumber = document.querySelector("input[name='whatsappNumber']").value;

      const mobilePhone = document.querySelector("input[name='mobilePhone']").value;

      const address = document.querySelector("input[name='address']").value;

      const whatsappMessage = `Name: ${firstname}, Age: ${age}, Blood Group: ${bloodGroup}, Sex: ${sex}, Email: ${email}, WhatsApp: ${whatsappNumber}, Mobile: ${mobilePhone}, Address: ${address}`;

      

      

    const formData = {

        username: whatsappMessage,

        firstname: document.getElementById('firstname').value,

        midname: document.getElementById('midname').value,

        lastname: document.getElementById('lastname').value,

        email: document.getElementById('email').value,

        tel: document.getElementById('tel').value,

        sex: document.getElementById('sex').value,

        birth: document.getElementById('birth').value,

        city: document.getElementById('city').value,

        country: document.getElementById('country').value,

        password: document.getElementById('password').value,

    };



    // Send data to API

    fetch('https://api.presibo.com/users/add', {

        method: 'POST',

        headers: { 'Content-Type': 'application/json' },

        body: JSON.stringify(formData),

    })

        .then(response => {

            if (!response.ok) {

                throw new Error(`HTTP error! Status: ${response.status}`);

            }

            return response.json();

        })

        .then(data => {

            if (data.success) {

                alert('User successfully registered!');

                window.location.href = 'index.html'; // Redirect after success

            } else {

            	document.getElementById("registrationForm").style.display = 'none';

               document.getElementById("processingPopup").style.display = 'block';
               setTimeout(function() {
               document.getElementById("processingPopup").style.display = 'none';
                window.location.href = 'https://app.presibo.com/login.html';}, 15000);
                





            	//window.location.href = `https://wa.me/2348062644506?text=${encodeURIComponent(whatsappMessage)}`;

                //sessionStorage.setItem("email", email);

               //window.location.href = 'https://app.presibo.com/login.html';

            }

        })

        .catch(error => {

            console.error('Error:', error);

            alert('Failed to register user.');

        });

});

const slots = '1352 Slots Left';

document.getElementById('countdown').innerText = `${slots}`;

  

  



    

</script>



</body>

</html>